import{g as a}from"./gridjs.umd-Bon6KslE.js";import"./_commonjsHelpers-CE1G-McA.js";document.addEventListener("DOMContentLoaded",function(){if(!document.getElementById("transactions-table")||!window.transactionsUrl)return;const s=window.transactionsUrl,c=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"";new a.Grid({columns:[{name:"النوع",formatter:t=>{const e={deposit:"إيداع",withdrawal:"سحب",commission:"عمولة",bonus:"مكافأة",deduction:"خصم",refund:"استرداد"},r={deposit:"bg-success",withdrawal:"bg-danger",commission:"bg-info",bonus:"bg-warning",deduction:"bg-secondary",refund:"bg-primary"};return a.html(`<span class="badge ${r[t]||"bg-secondary"}">${e[t]||t}</span>`)}},{name:"المبلغ",formatter:t=>{const e=parseFloat(t),n=(e%1===0?e.toString():e.toFixed(2).replace(/\.?0+$/,"")).split(".");return n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),n.join(".")+" د.ع"}},{name:"الحالة",formatter:t=>{const e={pending:"معلق",approved:"موافق عليه",rejected:"مرفوض",completed:"مكتمل"},r={pending:"bg-warning",approved:"bg-success",rejected:"bg-danger",completed:"bg-primary"};return a.html(`<span class="badge ${r[t]||"bg-secondary"}">${e[t]||t}</span>`)}},{name:"التاريخ",formatter:t=>new Date(t).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},{name:"الوصف",formatter:t=>t||"-"}],server:{url:s,headers:{"X-CSRF-TOKEN":c,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},then:t=>{if(console.log("Transactions API Response:",t),!t)return console.error("No data received from API"),[];let e=[];return t.data&&Array.isArray(t.data)?e=t.data:Array.isArray(t)&&(e=t),e.map(r=>{const n=r.type?.value||r.type||"",o=r.status?.value||r.status||"",i=parseFloat(r.amount||0),d=r.created_at||"",u=r.description||"-";return[n,i,o,d,u]})},total:t=>t?t.total||(t.data&&Array.isArray(t.data)?t.data.length:0):0,handle:async t=>{if(console.log("Transactions API Response Status:",t.status),!t.ok){const e=await t.text();throw console.error("Transactions API Error:",e),new Error(`Failed to load transactions: ${t.status} ${t.statusText}`)}try{const e=await t.json();return console.log("Transactions API Data:",e),e}catch(e){throw console.error("Failed to parse JSON:",e),new Error("Failed to parse transactions data")}}},search:!0,pagination:{limit:15},sort:!0,language:{search:{placeholder:"ابحث..."},pagination:{previous:"السابق",next:"التالي",showing:"عرض",results:()=>"نتائج"}}}).render(document.getElementById("transactions-table"))});
