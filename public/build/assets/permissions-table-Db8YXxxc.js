import{g as o}from"./gridjs.umd-Bon6KslE.js";import"./_commonjsHelpers-CE1G-McA.js";document.addEventListener("DOMContentLoaded",function(){if(document.getElementById("permissions-table")&&window.permissionsData){const i=document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",l=window.permissionsData.map(t=>{let n="";t.roles.length>0?(n=t.roles.slice(0,3).map(d=>`<span class="badge bg-primary-subtle text-primary py-1 px-2 mb-1">${d}</span>`).join(""),t.roles.length>3&&(n+=`<span class="badge bg-light-subtle text-muted py-1 px-2 mb-1">+${t.roles.length-3}</span>`)):n='<span class="text-muted">لا توجد أدوار</span>';const e=`<a href="${t.edit_url}" class="btn btn-soft-primary btn-sm" title="تعديل"><iconify-icon icon="solar:pen-2-broken" class="align-middle fs-18"></iconify-icon></a>`,s=`<button type="button" class="btn btn-soft-danger btn-sm delete-permission-btn" data-url="${t.delete_url}" data-token="${i}" title="حذف"><iconify-icon icon="solar:trash-bin-minimalistic-2-broken" class="align-middle fs-18"></iconify-icon></button>`,a=`<div class="d-flex gap-2">${e}${s}</div>`;return[o.html(`
                    <div>
                        <p class="fs-15 mb-0 fw-semibold">${t.name_ar}</p>
                        <small class="text-muted">${t.name}</small>
                    </div>
                `),o.html(`
                    <span class="badge bg-secondary-subtle text-secondary py-1 px-2">
                        ${t.description}
                    </span>
                `),o.html(`<div class="d-flex flex-wrap gap-1">${n}</div>`),o.html(a)]});new o.Grid({columns:[{name:"اسم الصلاحية",width:"30%",sort:!0},{name:"الوصف",width:"20%",sort:!0},{name:"مُسندة إلى",width:"30%"},{name:"الإجراءات",width:"20%",sort:!1}],pagination:{limit:15},search:!0,sort:!0,data:l.length>0?l:[[o.html('<span class="text-muted">لا توجد صلاحيات</span>'),"","",""]]}).render(document.getElementById("permissions-table")),document.addEventListener("click",function(t){if(t.target.closest(".delete-permission-btn")){t.preventDefault();const n=t.target.closest(".delete-permission-btn");if(confirm("هل أنت متأكد من حذف هذه الصلاحية؟")){const e=document.createElement("form");e.method="POST",e.action=n.getAttribute("data-url");const s=document.createElement("input");s.type="hidden",s.name="_token",s.value=n.getAttribute("data-token");const a=document.createElement("input");a.type="hidden",a.name="_method",a.value="DELETE",e.appendChild(s),e.appendChild(a),document.body.appendChild(e),e.submit()}}})}});
