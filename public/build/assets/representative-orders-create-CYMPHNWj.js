document.addEventListener("DOMContentLoaded",function(){const d=document.querySelector(".categories-slider"),c=document.querySelectorAll(".category-filter-btn");d&&c.length>0&&c.forEach(o=>{o.addEventListener("click",function(){c.forEach(a=>a.classList.remove("active")),this.classList.add("active");const n=new URL(window.location.href),t=this.dataset.categoryId;t?n.searchParams.set("category_id",t):n.searchParams.delete("category_id"),n.searchParams.delete("subcategory_id"),window.location.href=n.toString()})});const r=document.getElementById("modal_category_id"),e=document.getElementById("modal_subcategory_id");if(r&&e&&r.addEventListener("change",function(){const o=this.value;if(!o){e.innerHTML='<option value="">جميع الأقسام الفرعية</option>',e.disabled=!0;return}const n=`/admin/inventory/categories/${o}/subcategories`;fetch(n,{method:"GET",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}).then(t=>t.json()).then(t=>{e.innerHTML='<option value="">جميع الأقسام الفرعية</option>',t.length>0?(t.forEach(a=>{const i=document.createElement("option");i.value=a.id,i.textContent=a.name,e.appendChild(i)}),e.disabled=!1):(e.innerHTML='<option value="">لا توجد أقسام فرعية</option>',e.disabled=!0)}).catch(t=>{console.error("Error loading subcategories:",t),e.innerHTML='<option value="">حدث خطأ في تحميل الأقسام الفرعية</option>',e.disabled=!0})}),typeof Choices<"u"){const o=document.getElementById("modal_filter_tags");o&&new Choices(o,{removeItemButton:!0,searchEnabled:!0,placeholder:!0,placeholderValue:"اختر التاغات",searchPlaceholderValue:"ابحث عن تاغ..."})}});
